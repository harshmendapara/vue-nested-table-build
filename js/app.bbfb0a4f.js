(function(t){function e(e){for(var r,o,d=e[0],l=e[1],s=e[2],u=0,p=[];u<d.length;u++)o=d[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);c&&c(e);while(p.length)p.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,d=1;d<n.length;d++){var l=n[d];0!==a[l]&&(r=!1)}r&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},a={app:0},i=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var d=window["webpackJsonp"]=window["webpackJsonp"]||[],l=d.push.bind(d);d.push=e,d=d.slice();for(var s=0;s<d.length;s++)e(d[s]);var c=l;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("64a9")},"0448":function(t,e,n){},"39ee":function(t,e,n){"use strict";n("76d6")},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-link",{attrs:{to:"/"}},[t._v(" Home ")]),n("router-view")],1)},i=[],o={name:"App"},d=o,l=(n("034f"),n("2877")),s=Object(l["a"])(d,a,i,!1,null,null,null),c=s.exports,u=n("8c4f"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.loading?n("div",[t._v("Loading ...")]):n("div",{staticClass:"container"},[n("button",{attrs:{type:"button"},on:{click:function(e){return t.$refs.addEditModal.openModal()}}},[t._v(" Add ")]),n("table",{attrs:{border:"1"}},[n("thead",[n("tr",[n("th",{on:{click:function(e){return t.sort("id")}}},[t._v("Id")]),n("th",{on:{click:function(e){return t.sort("name")}}},[t._v("Name")]),n("th",{on:{click:function(e){return t.sort("parent")}}},[t._v("Parent")]),n("th",[t._v("Actions")])])]),n("tbody",t._l(t.displayTableData,(function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.id))]),n("td",{style:{"padding-left":30*t.getParentLevel(e.id)+"px"}},[t.hasChildren(e.id)?n("span",{staticClass:"mdi mdi-24px",class:{"mdi-plus-box":!e.childrenOpen,"mdi-minus-box":e.childrenOpen},on:{click:function(n){return t.toggleChildren(e.id)}}}):t._e(),t._v(t._s(e.name)+"\n          ")]),n("td",[t._v(t._s(e.parent))]),n("td",{staticClass:"text-center"},[n("span",{staticClass:"mdi mdi-pencil",on:{click:function(n){return t.$refs.addEditModal.openModal(e)}}}),t._v(" \n            "),n("span",{staticClass:"mdi mdi-delete",on:{click:function(n){return t.deleteItem(e.id)}}})])])})),0)]),n("p",[n("button",{on:{click:t.prevPage}},[t._v("Previous")]),t._v("  \n      "),n("button",{on:{click:t.nextPage}},[t._v("Next")])])]),n("AddEditModal",{ref:"addEditModal",attrs:{parents:t.getParentsArray},on:{addEditData:t.addEditData}})],1)},f=[],h=(n("20d6"),n("7514"),n("2909")),m=(n("7f7f"),n("55dd"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"fade"}},[t.show?n("div",{staticClass:"modal"},[n("div",{staticClass:"modal__backdrop",on:{click:function(e){return t.closeModal()}}}),n("div",{staticClass:"modal__dialog"},[n("div",{staticClass:"modal__header"},[t._v("\n        "+t._s("edit"===t.modalType?"Edit Data":"Add New Data")+"\n        "),n("button",{staticClass:"mdi mdi-close",attrs:{type:"button"},on:{click:function(e){return t.closeModal()}}})]),n("div",{staticClass:"modal__body"},[n("label",[t._v("Name:*")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.rowData.name,expression:"rowData.name"}],attrs:{label:"Name",type:"text"},domProps:{value:t.rowData.name},on:{input:function(e){e.target.composing||t.$set(t.rowData,"name",e.target.value)}}}),t.errors&&t.errors["name"]?n("span",{staticClass:"error"},[t._v(t._s(t.errors["name"]))]):t._e(),n("br"),n("label",[t._v("Select Parent(if any):")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.rowData.parentId,expression:"rowData.parentId"}],staticClass:"form-control",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.rowData,"parentId",e.target.multiple?n:n[0])},t.setParent]}},t._l(t.parents,(function(e){return n("option",{key:e.parentId,domProps:{value:e.parentId}},[t._v("\n                  "+t._s(e.parent)+"\n              ")])})),0),t._t("body")],2),n("div",{staticClass:"modal__footer"},[n("button",{on:{click:t.closeModal}},[t._v("Cancel")]),t._v("  \n        "),n("button",{on:{click:t.submitData}},[t._v(t._s("edit"===t.modalType?"Save":"Add"))])])])]):t._e()])}),v=[],b={name:"AddEditModal",props:["parents"],data:function(){return{show:!1,rowData:null,modalType:"add",errors:{name:""}}},methods:{closeModal:function(){this.show=!1,document.querySelector("body").classList.remove("overflow-hidden")},openModal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.show=!0,t?(this.modalType="edit",this.rowData=t):(this.modalType="add",this.rowData={name:"",parentId:null,parent:null,open:!0,childrenOpen:!1}),document.querySelector("body").classList.add("overflow-hidden")},setParent:function(){var t=this;this.rowData.parent=this.parents.find((function(e){return e.parentId===t.rowData.parentId})).parent,this.rowData.open=!1},submitData:function(){this.rowData.name.length?this.$emit("addEditData",this.rowData):this.errors["name"]="This field is required"}}},_=b,D=(n("39ee"),Object(l["a"])(_,m,v,!1,null,"2134b79e",null)),g=D.exports,y=n("2ef0"),w=n.n(y),I={name:"NestedTable",components:{AddEditModal:g},data:function(){return{loading:!0,tableData:[],currentSort:"",currentSortDir:"asc",showAddEditModal:!1,pageSize:10,currentPage:1}},created:function(){this.tableData=[{id:1,name:"Transport",parentId:null,parent:null,open:!0,childrenOpen:!1},{id:2,name:"Train",parentId:1,parent:"Transport",open:!1,childrenOpen:!1},{id:3,name:"Gujarat Express",parent:"Train",parentId:2,open:!1,childrenOpen:!1},{id:4,name:"Gujarat Express",parent:"Train",parentId:2,open:!1,childrenOpen:!1},{id:5,name:"Gujarat Express",parent:"Train",parentId:2,open:!1,childrenOpen:!1},{id:6,name:"Gujarat Express",parent:"Train",parentId:2,open:!1,childrenOpen:!1},{id:12,name:"Gujarat Express Child",parent:"Gujarat Express",parentId:6,open:!1,childrenOpen:!1},{id:7,name:"Train 1",parentId:1,parent:"Transport",open:!1,childrenOpen:!1},{id:8,name:"General",parentId:null,parent:null,open:!0,childrenOpen:!1},{id:9,name:"Software",parentId:8,parent:"General",open:!1,childrenOpen:!1},{id:10,name:"MS Office",parentId:9,parent:"Software",open:!1,childrenOpen:!1},{id:11,name:"Hardware",parentId:8,parent:"General",open:!1,childrenOpen:!1},{id:13,name:"CPU",parentId:11,parent:"Hardware",open:!1,childrenOpen:!1}],this.loading=!1},computed:{sortedTable:function(){var t=this,e=this.tableData.filter((function(t){return!t.parentId})),n=[],r=e.sort((function(e,n){if(!e.parentId&&!n.parentId){var r=1;return"desc"===t.currentSortDir&&(r=-1),e[t.currentSort]<n[t.currentSort]?-1*r:e[t.currentSort]>n[t.currentSort]?1*r:0}}));return r.map((function(e){n.push(e),t.hasChildren(e.id)&&t.sortChildren(e.id,n)})),w.a.uniqBy(n,"id")},displayTableData:function(){var t=this;return this.sortedTable.filter((function(t){return!t.parent||t.open})).filter((function(e,n){var r=(t.currentPage-1)*t.pageSize,a=t.currentPage*t.pageSize;if(n>=r&&n<a)return!0}))},getParentsArray:function(){var t=w.a.uniqBy(this.tableData,"id");return t.map((function(t){return{parent:t.name,parentId:t.id}}))}},methods:{sort:function(t){t===this.currentSort&&(this.currentSortDir="asc"===this.currentSortDir?"desc":"asc"),this.currentSort=t},sortChildren:function(t,e){var n=this,r=this.tableData.filter((function(e){return e.parentId===t})),a=r.sort((function(t,e){var r=1;return"desc"===n.currentSortDir&&(r=-1),t[n.currentSort]<e[n.currentSort]?-1*r:t[n.currentSort]>e[n.currentSort]?1*r:0}));return a.map((function(t){e.push(t),n.hasChildren(t.id)&&e.push.apply(e,Object(h["a"])(n.sortChildren(t.id,e)))})),a},nextPage:function(){this.currentPage*this.pageSize<this.tableData.filter((function(t){return t.open})).length&&this.currentPage++},prevPage:function(){this.currentPage>1&&this.currentPage--},hasChildren:function(t){var e=this.tableData.filter((function(e){return e.parentId===t}));return e.length>0},toggleChildren:function(t){var e=this.tableData.find((function(e){return e.id===t}));if(e.childrenOpen=!e.childrenOpen,this.hasChildren(t)&&!e.childrenOpen)this.closeNestedChildren(t);else{var n=this.tableData.filter((function(e){return e.parentId===t}));n.map((function(t){return t.open=!t.open}))}},closeNestedChildren:function(t){var e=this,n=this.tableData.filter((function(e){return e.parentId===t}));n.map((function(t){t.open=!1,e.hasChildren(t.id)&&(t.childrenOpen=!1,e.closeNestedChildren(t.id))}))},getParentLevel:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.tableData.find((function(e){return e.id===t}));return n.parentId>0?(e+=1,this.getParentLevel(n.parentId,e)):e},addEditData:function(t){if(t.id){var e=this.tableData.findIndex((function(e){return e.id===t.id}));this.tableData.splice(e,1,t)}else{var n=Math.max.apply(Math,Object(h["a"])(this.tableData.map((function(t){return t.id}))))+1;if(t.id=n,t.parentId){t.open=this.tableData.find((function(e){return e.id===t.parentId})).childrenOpen;var r=this.tableData.findIndex((function(e){return e.id===t.parentId}));this.tableData.splice(r+1,0,t)}else this.tableData.push(t)}this.$refs.addEditModal.closeModal()},deleteItem:function(t){var e=this.tableData.findIndex((function(e){return e.id===t}));confirm("Do you really want to delete?")&&(e>-1&&this.tableData.splice(e,1),this.hasChildren(t)&&this.deleteChildren(t))},deleteChildren:function(t){var e=this,n=this.tableData.filter((function(e){return e.parentId===t}));n.map((function(t){var n=e.tableData.findIndex((function(e){return e.id===t.id}));n>-1&&e.tableData.splice(n,1),e.hasChildren(t.id)&&e.deleteChildren(t.id)}))}}},O=I,C=(n("de51"),Object(l["a"])(O,p,f,!1,null,"2a771021",null)),S=C.exports;r["a"].use(u["a"]);var x=new u["a"]({mode:"history",routes:[{path:"/",name:"Table",component:S,template:"<Table />"}]});r["a"].config.productionTip=!1,new r["a"]({el:"#app",router:x,components:{App:c},render:function(t){return t(c)}})},"64a9":function(t,e,n){},"76d6":function(t,e,n){},de51:function(t,e,n){"use strict";n("0448")}});
//# sourceMappingURL=app.bbfb0a4f.js.map